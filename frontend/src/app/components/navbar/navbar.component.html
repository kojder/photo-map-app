<nav *ngIf="authService.isLoggedIn()" class="bg-white shadow-md sticky top-0 z-50">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Desktop Navbar (â‰¥ 768px) -->
    <div class="hidden md:flex justify-between items-center h-16">
      <!-- Left: Logo + Navigation Links -->
      <div class="flex items-center space-x-1">
        <!-- Logo/Brand -->
        <div class="text-xl font-bold text-gray-800 mr-4">PhotoMap</div>

        <!-- Gallery Link -->
        <a
          routerLink="/gallery"
          routerLinkActive="bg-blue-100 text-blue-700 font-semibold"
          [routerLinkActiveOptions]="{exact: false}"
          class="flex items-center space-x-2 px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-all"
          data-testid="navbar-gallery-link"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
          </svg>
          <span>Gallery</span>
        </a>

        <!-- Map Link -->
        <a
          routerLink="/map"
          routerLinkActive="bg-blue-100 text-blue-700 font-semibold"
          [routerLinkActiveOptions]="{exact: false}"
          class="flex items-center space-x-2 px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-all"
          data-testid="navbar-map-link"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z" />
          </svg>
          <span>Map</span>
        </a>

        <!-- Admin Link (tylko dla admina) -->
        <a
          *ngIf="authService.isAdmin()"
          routerLink="/admin"
          routerLinkActive="bg-blue-100 text-blue-700 font-semibold"
          [routerLinkActiveOptions]="{exact: false}"
          class="flex items-center space-x-2 px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-all"
          data-testid="navbar-admin-link"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
          </svg>
          <span>Admin</span>
        </a>
      </div>

      <!-- Right: Logout Button -->
      <button
        (click)="logout()"
        class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all"
        data-testid="navbar-logout-btn"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
        </svg>
        <span>Logout</span>
      </button>
    </div>

    <!-- Mobile Navbar (< 768px) -->
    <div class="md:hidden">
      <!-- Top Bar -->
      <div class="flex justify-between items-center h-14">
        <div class="text-lg font-bold text-gray-800">PhotoMap</div>
        <button
          (click)="toggleMobileMenu()"
          class="p-2 rounded-lg text-gray-600 hover:bg-gray-100"
          data-testid="navbar-hamburger-btn"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
          </svg>
        </button>
      </div>

      <!-- Mobile Menu (expanded) -->
      @if (mobileMenuOpen()) {
        <div class="pb-4 border-t border-gray-200 mt-2" data-testid="navbar-mobile-menu">
          <!-- Gallery Link -->
          <a
            routerLink="/gallery"
            (click)="closeMobileMenu()"
            routerLinkActive="bg-blue-100 text-blue-700"
            [routerLinkActiveOptions]="{exact: false}"
            class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg"
            data-testid="navbar-mobile-gallery-link"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
            </svg>
            <span>Gallery</span>
          </a>

          <!-- Map Link -->
          <a
            routerLink="/map"
            (click)="closeMobileMenu()"
            routerLinkActive="bg-blue-100 text-blue-700"
            [routerLinkActiveOptions]="{exact: false}"
            class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg"
            data-testid="navbar-mobile-map-link"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z" />
            </svg>
            <span>Map</span>
          </a>

          <!-- Admin Link (tylko dla admina) -->
          <a
            *ngIf="authService.isAdmin()"
            routerLink="/admin"
            (click)="closeMobileMenu()"
            routerLinkActive="bg-blue-100 text-blue-700"
            [routerLinkActiveOptions]="{exact: false}"
            class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg"
            data-testid="navbar-mobile-admin-link"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
            </svg>
            <span>Admin Panel</span>
          </a>

          <!-- Logout Button -->
          <div class="border-t border-gray-200 mt-2 pt-2">
            <button
              (click)="logout()"
              class="flex items-center space-x-3 px-4 py-3 w-full text-red-600 hover:bg-red-50 rounded-lg"
              data-testid="navbar-mobile-logout-btn"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
              </svg>
              <span>Logout</span>
            </button>
          </div>
        </div>
      }
    </div>
  </div>
</nav>
